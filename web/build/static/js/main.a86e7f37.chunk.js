(this["webpackJsonpreact-material"]=this["webpackJsonpreact-material"]||[]).push([[0],{184:function(e,t,n){},185:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(12),r=n.n(i),o=n(131),s=n(221),l=n(37),d=n(15),b=n(11),j=n(14),u=n(222),p=n(17),x=n(223),h=n(224),f=n(104),m=n(189),O=n(190),g=n(238),v=n(132),y=n(90),k=n.n(y),w=n(128),S=n.n(w),N=n(126),C=n.n(N),z=n(225),I=n(226),D=n(2),B=Object(u.a)((function(e){return{grow:{flexGrow:1},title:{display:"flex"},search:Object(j.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(p.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(p.c)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:e.spacing(3),width:"auto",display:"none"},e.breakpoints.up("sm"),{display:"flex"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},mobileSearchIcon:Object(j.a)({display:"flex"},e.breakpoints.up("sm"),{display:"none"}),mobileSearchMenuList:{paddingTop:0,paddingBottom:0},mobileSearchMenuPaper:{width:"100%"},inputRoot:{color:"inherit",width:"300px"},toolbarClass:{minHeight:"48px"},inputInput:Object(j.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),menuBar:{backgroundColor:"#FFFFFF",width:"100%"},logo:{fontWeight:"400"}}}));function E(){var e=B(),t=c.a.useState(null),n=Object(b.a)(t,2),a=n[0],i=n[1],r=c.a.useState(null),o=Object(b.a)(r,2),s=o[0],d=o[1],j=c.a.useState(""),u=Object(b.a)(j,2),p=u[0],y=u[1],w=Boolean(a),N=Boolean(s),E=function(){i(null)},R=function(){window.location.href="/search/"+p},T="primary-search-account-menu",M=Object(D.jsxs)(v.a,{anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},id:T,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:w,onClose:E,children:[Object(D.jsx)(g.a,{onClick:E,children:"Profile"}),Object(D.jsx)(g.a,{onClick:E,children:"My account"})]}),A=Object(D.jsx)(v.a,{anchorEl:document.getElementById("navbar"),anchorOrigin:{vertical:"top",horizontal:"left"},id:"mobile-search-bar",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:N,onClose:function(){d(null)},classes:{list:e.mobileSearchMenuList,paper:e.mobileSearchMenuPaper},children:Object(D.jsx)("div",{children:Object(D.jsx)(C.a,{value:p,onChange:y,placeholder:"Search YouTube",onRequestSearch:function(){return R()}})})});return Object(D.jsxs)("div",{children:[Object(D.jsx)(x.a,{id:"navbar",position:"absolute",className:e.menuBar,children:Object(D.jsxs)(h.a,{variant:"dense",className:e.toolbarClass,children:[Object(D.jsxs)(z.a,{container:!0,spacing:3,alignItems:"center",children:[Object(D.jsx)(z.a,{item:!0,xs:!0,display:"inline",children:Object(D.jsx)(l.b,{to:"/",children:Object(D.jsxs)(I.a,{component:"button",underline:"none",color:"accent",children:[Object(D.jsx)(m.a,{display:"inline",variant:"h6",className:e.logo,children:"Comment"}),Object(D.jsx)(m.a,{display:"inline",variant:"h6",color:"secondary",className:e.logo,children:"Sense"})]})})}),Object(D.jsx)(z.a,{item:!0,s:!0,children:Object(D.jsxs)("div",{className:e.search,children:[Object(D.jsx)("div",{className:e.searchIcon,children:Object(D.jsx)(k.a,{})}),Object(D.jsx)(O.a,{placeholder:"Search YouTube",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){return y(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&R()}})]})}),Object(D.jsxs)(z.a,{container:!0,xs:!0,direction:"row",alignContent:"flex-end",justify:"flex-end",children:[Object(D.jsx)(f.a,{"aria-label":"search",color:"inherit",onClick:function(e){d(e.currentTarget)},className:e.mobileSearchIcon,children:Object(D.jsx)(k.a,{})}),Object(D.jsx)(f.a,{edge:"end","aria-label":"account of current user","aria-controls":T,"aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit",children:Object(D.jsx)(S.a,{})})]})]}),A,M]})}),Object(D.jsx)(h.a,{className:e.toolbarClass})]})}var R=n(110),T=n.n(R),M=n(129),A=n(227),L=n(228),P=n(229),W=Object(u.a)((function(e){var t,n;return{root:(t={display:"flex",width:"100%",borderRadius:"0",padding:"0",margin:"10px 0 0 0",boxSizing:"border-box"},Object(j.a)(t,e.breakpoints.up("sm"),{width:"480px"}),Object(j.a)(t,e.breakpoints.up("md"),{width:"768px"}),t),link:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"center",textDecoration:"none",color:"inherit"},cover:(n={height:"80px",width:"auto"},Object(j.a)(n,e.breakpoints.up("sm"),{height:"120px"}),Object(j.a)(n,"marginBottom","0"),n),details:{display:"flex",flexDirection:"column",top:"0",margin:"8px",padding:"1px 5px"},title:Object(j.a)({top:"0",margin:"0",lineHeight:"1",fontSize:"1.0em"},e.breakpoints.up("sm"),{fontSize:"1.1em"}),faint:Object(j.a)({color:"#757575",fontSize:"0.8em"},e.breakpoints.up("sm"),{fontSize:"0.9em"}),actionArea:{alignItems:"flex-start",fontSize:"1em",margin:"0",padding:"0"}}}));var F=Object(d.g)((function(e){var t=e.video,n=W();return Object(D.jsx)(l.b,{to:"../video/"+t.id,className:n.link,children:Object(D.jsxs)(A.a,{className:n.root,children:[Object(D.jsx)(L.a,{className:n.cover,component:"img",src:t.thumbnail,title:t.title}),Object(D.jsx)(P.a,{className:n.actionArea,children:Object(D.jsxs)("div",{className:n.details,children:[Object(D.jsx)(m.a,{className:n.title,dangerouslySetInnerHTML:{__html:t.title}}),Object(D.jsx)(m.a,{className:n.faint,children:t.channelTitle})]})})]})})})),G=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",flexWrap:"nowrap",backgroundColor:"#f5f5f5",margin:"0",paddingTop:"10px"}}})),H=function(e){var t=e.page,n=G(),c=Object(a.useState)([]),i=Object(b.a)(c,2),r=i[0],o=i[1],s=Object(d.f)().key;Object(a.useEffect)((function(){switch(t){case"recent":l(10);break;case"search":j(s)}}),[]);var l=function(){var e=Object(M.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("/api/recent").then((function(e){return e.json()})).then((function(e){u(e.videos)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e){fetch("/api/search/".concat(e)).then((function(e){return e.json()})).then((function(e){u(e.videos)}))},u=function(e){o(e.reverse().map((function(e){return Object(D.jsx)(F,{video:e})})))};return Object(D.jsx)(z.a,{container:!0,className:n.root,direction:"column",children:r})},_=n(5),Y=n(230),J=n(106),q=n.n(J),K=n(107),Q=n.n(K),U=n(92),V=n.n(U),X=n(130),Z=n.n(X);function $(e){if("number"===typeof e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}try{return $(parseInt(e))}catch(n){return e}}var ee=Object(_.a)((function(e){return{root:Object(j.a)({padding:"5px 0",display:"flex",flexDirection:"column",justifyContent:"space-between"},e.breakpoints.up("sm"),{flexDirection:"row"}),line:{display:"flex",flexDirection:"row"}}}))((function(e){var t=e.video,n=e.classes;return Object(D.jsxs)("div",{className:n.root,children:[Object(D.jsxs)("div",{className:n.line,children:[Object(D.jsx)(q.a,{style:{padding:"0px 10px"}}),Object(D.jsx)(m.a,{noWrap:!0,children:$(t.views)})]}),Object(D.jsxs)("div",{className:n.line,children:[Object(D.jsx)(Q.a,{style:{padding:"0px 10px"}}),Object(D.jsx)(m.a,{variant:"body1",noWrap:!0,children:t.published})]}),Object(D.jsxs)("div",{className:n.line,children:[Object(D.jsx)(V.a,{style:{padding:"0px 10px"}}),Object(D.jsx)(m.a,{variant:"body1",children:$(t.likes)}),Object(D.jsx)(Z.a,{style:{padding:"0px 10px"}}),Object(D.jsx)(m.a,{variant:"body1",children:$(t.dislikes)})]})]})})),te=Object(_.a)((function(e){var t,n;return{root:(t={width:"100%",borderRadius:"0"},Object(j.a)(t,e.breakpoints.up("sm"),{width:"600px"}),Object(j.a)(t,e.breakpoints.up("md"),{width:"768px"}),t),video:(n={width:"320px",height:"180px",border:"none"},Object(j.a)(n,e.breakpoints.up("sm"),{width:"600px",height:"333px"}),Object(j.a)(n,e.breakpoints.up("md"),{width:"768px",height:"432px"}),n),details:{padding:"10px",height:"auto"},videoBackground:{width:"100%",backgroundColor:"black",display:"flex",flexDirection:"column",alignItems:"center"},infoLine:Object(j.a)({padding:"10px",display:"flex",flexDirection:"column",justifyContent:"space-between"},e.breakpoints.up("sm"),{flexDirection:"row"})}}))((function(e){var t=e.videoData,n=e.classes,c=Object(a.useState)(null),i=Object(b.a)(c,2),r=i[0],o=i[1];return Object(a.useEffect)((function(){o(t)}),[t]),r?Object(D.jsxs)("div",{className:n.root,children:[Object(D.jsx)("div",{className:n.videoBackground,children:Object(D.jsx)(L.a,{component:"iframe",className:n.video,image:"http://youtube.com/embed/"+r.id})}),Object(D.jsxs)("div",{className:n.details,children:[Object(D.jsx)(m.a,{variant:"h6",style:{lineHeight:"1.1",marginBottom:"10px"},children:r.title}),Object(D.jsx)(m.a,{variant:"body1",children:Object(D.jsx)("u",{children:r.channelTitle})}),Object(D.jsx)(ee,{video:r})]})]}):Object(D.jsx)(Y.a,{color:"secondary"})})),ne=n(232),ae=n(236),ce=n(233),ie=n(231),re=Object(_.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:e.palette.grey["light"===e.palette.type?200:700]},bar1Buffer:{height:10,borderRadius:5,backgroundColor:"black"},bar2Buffer:{height:10,borderRadius:5,backgroundColor:"red"}}}))(ie.a),oe=Object(_.a)((function(e){return{root:{flexGrow:1,textAlign:"center",padding:"20px"}}}))((function(e){var t=e.target,n=e.progress,c=e.classes,i=Object(a.useState)(0),r=Object(b.a)(i,2),o=r[0],s=r[1],l=Object(a.useState)(0),d=Object(b.a)(l,2),j=d[0],u=d[1],p=Object(a.useState)("Loading..."),x=Object(b.a)(p,2),h=x[0],f=x[1];return Object(a.useEffect)((function(){switch(n.analyzed&&s(Math.min(100,n.analyzed/t*100)),n.loaded&&u(Math.min(100,n.loaded/t*100)),n.status){case"api":f("Getting comment data from YouTube api...");break;case"init":f("Initializing Web Scraper...");break;case"load":f("Loading video on YouTube...");break;case"scrape":f("Scraping comments...");break;case"analyze":f("Analyzing comments...");break;case"done":f("Preparing results...");break;default:f("")}}),[n]),Object(D.jsxs)("div",{className:c.root,children:[Object(D.jsx)(re,{variant:"buffer",value:o,valueBuffer:j}),Object(D.jsx)(m.a,{children:h})]})})),se=Object(_.a)((function(e){return{root:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",alignContent:"center",textAlign:"center",width:"100%"},counter:{width:"100%",textAlign:"center",margin:"5px",fontWeight:"800"},input:{textAlign:"right",margin:"-4px, 10px, 0px, 10px",width:"60px"}}}))((function(e){var t=e.videoData,n=e.progress,c=e.analyze,i=e.classes,r=Object(a.useState)(0),o=Object(b.a)(r,2),s=o[0],l=o[1],d=Object(a.useState)(0),j=Object(b.a)(d,2),u=j[0],p=j[1];Object(a.useEffect)((function(){t&&(l(t.comments?t.comments:0),p(t.n_analyzed))}),[t]);var x=Object(a.useState)(!1),h=Object(b.a)(x,2),f=h[0],O=h[1];Object(a.useEffect)((function(){n&&(console.log(n),p(n.analyzed),"done"===n.status?O(!1):O(!0),n.error&&console.log("Analyzer aborted: "+n.error))}),[n]);var g=Object(a.useState)(100),v=Object(b.a)(g,2),y=v[0],k=v[1];return Object(D.jsxs)(ne.a,{className:i.root,children:[Object(D.jsxs)(m.a,{className:i.counter,children:[u," Analyzed / ",s," Comments"]}),f?Object(D.jsx)(oe,{target:y,progress:n}):Object(D.jsxs)("div",{className:i.notLoading,children:[Object(D.jsx)(ae.a,{className:i.input,onChange:function(e){k(e.target.value)},value:y,inputProps:{min:0},color:"secondary"}),Object(D.jsx)(ce.a,{id:"apiAnalyzeButton",color:"secondary",onClick:function(){return c(y)},children:"Analyze"})]})]})})),le=n(237),de=n(234),be=n(235),je=n(239),ue=Object(_.a)((function(){return{bar:{height:"100%",position:"absolute",left:0,top:0,backgroundColor:"dodgerBlue",zIndex:0},label:{display:"flex",flexDirection:"row",justifyContent:"space-between"},text:{zIndex:1}}}))((function(e){var t=Object(a.useState)(0),n=Object(b.a)(t,2),c=(n[0],n[1]);return Object(a.useEffect)((function(){c(100)}),[]),Object(D.jsxs)("div",{style:{width:"100%"},children:[Object(D.jsx)(je.a,{className:e.classes.bar,width:Math.round(100*e.barRatio)+"%"}),Object(D.jsxs)("div",{className:e.classes.label,children:[Object(D.jsx)(m.a,{variant:"h6",className:e.classes.text,children:e.token}),Object(D.jsx)(m.a,{variant:"h6",className:e.classes.text,children:e.score})]})]})})),pe=Object(_.a)((function(){return{default:{display:"flex",flexDirection:"column",alignContents:"flex-start",margin:"5px",padding:"5px",backgroundColor:"#f5f5f5"}}}))((function(e){return Object(D.jsxs)(A.a,{className:e.classes.default,children:[Object(D.jsx)(m.a,{color:"secondary",children:e.comment.author}),Object(D.jsx)(m.a,{dangerouslySetInnerHTML:{__html:e.comment.text}}),e.comment.likes?Object(D.jsxs)(m.a,{children:[Object(D.jsx)(V.a,{style:{padding:"0px 10px"}}),e.comment.likes]}):""]})})),xe=function(e){e.topicComments;var t=Object(a.useState)(null),n=Object(b.a)(t,2),c=n[0];n[1];return Object(a.useEffect)((function(){console.log("Get comments")}),[]),c?c.map((function(e){return Object(D.jsx)(pe,{comment:e})})):Object(D.jsx)(Y.a,{color:"secondary"})},he=Object(_.a)((function(e){var t;return{root:(t={width:"100%",borderRadius:"0",padding:"0",margin:"10px 0 0 0",boxSizing:"border-box"},Object(j.a)(t,e.breakpoints.up("sm"),{width:"600px"}),Object(j.a)(t,e.breakpoints.up("md"),{width:"768px"}),t),detail:{padding:0,margin:0,display:"flex",flexDirection:"column",width:"100%"}}}))((function(e){var t=e.topic,n=e.max,c=e.classes,i=Object(a.useState)(null),r=Object(b.a)(i,2),o=r[0],s=r[1];return Object(D.jsxs)(le.a,{className:c.root,onChange:function(){o||(console.log(t),s(Object(D.jsx)(xe,{topicComments:t.comments})))},children:[Object(D.jsx)(de.a,{className:c.summary,children:Object(D.jsx)(ue,{token:t.token,score:t.score,barRatio:t.score/n})}),Object(D.jsx)(be.a,{className:c.detail,children:o})]})})),fe=function(e){var t=e.topics,n=Object(a.useState)([]),c=Object(b.a)(n,2),i=c[0],r=c[1];return Object(a.useEffect)((function(){if("string"===typeof t&&(t=JSON.parse(t)),t)if(0===t.length)r("");else{var e=t[0].score,n=t.map((function(t){return Object(D.jsx)(he,{topic:t,max:e},t.token)}));r(n)}else r("")}),[t]),Object(D.jsx)("div",{children:i})},me=Object(_.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",flexWrap:"nowrap",backgroundColor:"#f5f5f5",margin:"0",paddingTop:"10px"}}}))((function(e){var t=e.classes,n=Object(d.f)().videoId,c=Object(a.useState)(null),i=Object(b.a)(c,2),r=i[0],o=i[1],s=Object(a.useState)([]),l=Object(b.a)(s,2),j=l[0],u=l[1],p=Object(a.useState)(null),x=Object(b.a)(p,2),h=x[0];x[1];Object(a.useEffect)((function(){fetch("/api/video/".concat(n)).then((function(e){return e.json()})).then((function(e){o(e.video),u(e.video.topics)}))}),[]);return Object(D.jsxs)(z.a,{container:!0,className:t.root,direction:"column",children:[Object(D.jsxs)(A.a,{children:[Object(D.jsx)(te,{videoData:r}),Object(D.jsx)(se,{videoData:r,progress:h,analyze:function(e){console.log("analyze")}})]}),Object(D.jsx)(fe,{topics:j})]})}));n(184);var Oe=function(){var e=Object(o.a)({palette:{primary:{main:"#fafafa"},secondary:{main:"#b71c1c"},dark:{main:"#424242"},info:{light:"#bdbdbd",main:"#bdbdbd",dark:"#bdbdbd",contrastText:"#bdbdbd"}}});return Object(D.jsx)("div",{className:"App",children:Object(D.jsx)(s.a,{theme:e,children:Object(D.jsxs)(l.a,{children:[Object(D.jsx)(E,{}),Object(D.jsxs)(d.c,{children:[Object(D.jsx)(d.a,{path:"/",exact:!0,component:function(){return Object(D.jsx)(H,{page:"recent"})}}),Object(D.jsx)(d.a,{path:"/search/:key",exact:!0,component:function(){return Object(D.jsx)(H,{page:"search"})}}),Object(D.jsx)(d.a,{path:"/video/:videoId",exact:!0,component:function(){return Object(D.jsx)(me,{})}})]})]})})})};r.a.render(Object(D.jsx)(c.a.StrictMode,{children:Object(D.jsx)(Oe,{})}),document.getElementById("root"))}},[[185,1,2]]]);
//# sourceMappingURL=main.a86e7f37.chunk.js.map